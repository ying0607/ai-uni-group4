{% extends "base.html" %}

{% block title %}佳質食品_小江解AI配方系统 - 配方詳細資料{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/search_result_final.css">
{% endblock %}

{% block extra_js %}
<script src="/static/js/search_result_final.js" defer></script>
{% endblock %}

{% block content %}
<!-- 搜尋欄 -->
{% include 'partials/search_bar.html' %}

<!-- 配方詳細資料 -->
<div class="content-container">
    <div class="search-results">
        <h2 class="results-title">搜索結果</h2>
    
        <div class="recipe-details" id="recipe-details">
            <div class="recipe-details-line"><strong>產品編號: </strong><span id="product-code"></span></div>
            <div class="recipe-details-line"><strong>產品名稱: </strong><span id="product-name"></span></div>
            <div class="recipe-details-line"><strong>版本別: </strong><span id="version"></span></div>
            <div class="recipe-details-line"><strong>標準工時: </strong><span id="standard-hours"></span></div>
            <div class="recipe-details-line"><strong>規格: </strong><span id="specification"></span></div>
            <div class="recipe-details-line"><strong>單據編註: </strong><span id="document-note"></span></div>
            <div class="recipe-details-date"><strong>製表日期: </strong><span id="create-date"></span></div>
        </div>
    
        <!-- 配方表 -->
        <table class="ingredients-table">
            <thead>
                <tr>
                    <th>步驟</th>
                    <th>原料編號</th>
                    <th>原料名稱</th>
                    <th>單位</th>
                    <th>原料用量</th>
                    <th>產品基數</th>
                    <th>附註</th>
                    <th>單價未稅</th>
                    <th>成本</th>
                </tr>
            </thead>
            <tbody>
                <!-- JS 自動新增欄位 -->
            </tbody>
            <tfoot>
                <tr class="total-row">
                    <th colspan="8">總成本</th>
                    <th id="total-cost">$0.00</th>
                </tr>
            </tfoot>
        </table>
    
        <!-- 注意事項區段 -->
        <div class="notice-section">
            <div class="notice-title">📋 注意事項</div>
            <div class="notice-content">
                <ul id="notices-list">
                    <li><!-- js新增 --></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- 詳細資料側邊視窗 -->
<div class="detail-panel" id="detailPanel">
    <div class="detail-content">
        <div class="detail-title" id="detailTitle">詳細資訊</div>
        <div class="detail-info">
            <ul class="detail-list" id="detailList">
                <li><strong>步驟：</strong><span id="detail-step"></span></li>
                <li><strong>原料編號：</strong><span id="detail-code"></span></li>
                <li><strong>原料名稱：</strong><span id="detail-name"></span></li>
                <li><strong>單位：</strong><span id="detail-unit"></span></li>
                <li><strong>原料用量：</strong><span id="detail-quantity"></span></li>
                <li><strong>產品基數：</strong><span id="detail-base"></span></li>
                <li><strong>附註：</strong><span id="detail-notes"></span></li>
                <li><strong>單價未稅：</strong><span id="detail-price"></span></li>
                <li><strong>成本：</strong><span id="detail-cost" class="cost-highlight"></span></li>
            </ul>
        </div>
        <div class="detail-info">
            <h4>原料特性</h4>
            <p id="more-info"></p>
        </div>
        <button class="close-btn" onclick="closeDetailPanel()">關閉</button>
    </div>
</div>
{% endblock %}